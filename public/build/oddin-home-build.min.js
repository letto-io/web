var oddin=angular.module("oddin",["ui.router","ui.materialize","ngCookies","ui.mask"]);oddin.config(["$stateProvider",function(t){t.state("login",{url:"/login",templateUrl:"/partials/login",controller:"LoginController"}).state("recuperar_senha",{url:"/recuperar_senha",templateUrl:"/partials/recover-password",controller:"LoginController"}).state("redefinir_senha",{url:"/redefinir_senha",templateUrl:"/partials/redefine-password",controller:"LoginController"}).state("instructions",{url:"/disciplinas",templateUrl:"/partials/instructions",controller:"InstructionsController"}).state("presentations",{url:"/disciplinas/:instructionID/aulas",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/presentations/index-student"):1==t.get("profile")?e.fromUrl("/partials/presentations/index-instructor"):void 0},controller:"PresentationsController"}).state("presentation-show",{url:"/aulas/:presentationID",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/presentations/show-student"):1==t.get("profile")?e.fromUrl("/partials/presentations/show-instructor"):void 0},controller:"PresentationShowController"}).state("presentation-materials",{url:"/aulas/:presentationID/material",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/presentations/material-student"):1==t.get("profile")?e.fromUrl("/partials/presentations/material-instructor"):void 0},controller:"PresentationMaterialController"}).state("notices",{url:"/disciplinas/:instructionID/avisos",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/notices/index-student"):1==t.get("profile")?e.fromUrl("/partials/notices/index-instructor"):void 0},controller:"NoticesController"}).state("dates",{url:"/disciplinas/:instructionID/datas",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/dates/index-student"):1==t.get("profile")?e.fromUrl("/partials/dates/index-instructor"):void 0},controller:"DatesController"}).state("works",{url:"/disciplinas/:instructionID/tarefas",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/works/index-student"):1==t.get("profile")?e.fromUrl("/partials/works/index-instructor"):void 0},controller:"WorksController"}).state("work-show",{url:"/tarefas/:workID",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/works/show-student"):1==t.get("profile")?e.fromUrl("/partials/works/show-instructor"):void 0},controller:"WorkShowController"}).state("materials",{url:"/disciplinas/:instructionID/materiais",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/materials/index-student"):1==t.get("profile")?e.fromUrl("/partials/materials/index-instructor"):void 0},controller:"MaterialsController"}).state("participants",{url:"/disciplinas/:instructionID/participantes",templateUrl:"/partials/participants",controller:"ParticipantsController"}).state("faqs",{url:"/disciplinas/:instructionID/faqs",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/faqs/index-student"):1==t.get("profile")?e.fromUrl("/partials/faqs/index-instructor"):void 0},controller:"FAQsController"}).state("surveys",{url:"/disciplinas/:instructionID/enquetes",templateProvider:function(t,e){return 0==t.get("profile")?e.fromUrl("/partials/surveys/index-student"):1==t.get("profile")?e.fromUrl("/partials/surveys/index-instructor"):void 0},controller:"SurveysController"}).state("admin-events",{url:"/admin-cursos",templateUrl:"/partials/admin/events",controller:"AdminEventsController"}).state("admin-lectures",{url:"/admin-disciplinas",templateUrl:"/partials/admin/lectures",controller:"AdminLecturesController"}).state("admin-users",{url:"/admin-usuarios",templateUrl:"/partials/admin/users",controller:"AdminUsersController"}).state("admin-event-show",{url:"/admin-cursos/:eventID",templateUrl:"/partials/admin/event-show",controller:"AdminEventShowController"}).state("admin-instruction-show",{url:"/admin-disciplinas-cadastradas/:instructionID",templateUrl:"/partials/admin/instruction-show",controller:"AdminInstructionShowController"}).state("admin-add-participants",{url:"/add-participants/:instructionID",templateUrl:"/partials/admin/add-participants",controller:"AdminInstructionShowController"}).state("admin-add-instructions",{url:"/add-instructions/:eventID",templateUrl:"/partials/admin/add-instructions",controller:"AdminEventShowController"})}]).run(["$window","$location","$state","$cookies",function(t,e,a,n){"/home"==t.location.pathname&&(n.get("admin")?a.go("admin-events"):a.go("instructions")),"/"==t.location.pathname&&(n.get("session")?t.location.href="/home":a.go("login"))}]),oddin.controller("AdminEventsController",["$scope","EventAPI","CurrentUser","ManageList",function(t,e,a,n){t.user=a,function(){t.load=!1,e.index().then(function(e){t.events=e.data}).catch(function(){Materialize.toast("Erro ao carregar cursos",3e3)}).finally(function(){t.load=!0})}(),t.createEvent=function(a){t.load=!1,e.create(a).then(function(e){t.events.push(e.data),Materialize.toast("Curso cadastrado",3e3)}).catch(function(){Materialize.toast("Erro ao cadastrar curso",3e3)}).finally(function(){delete t.newEvent,t.load=!0})},t.updateEvent=function(a){t.load=!1,e.update(a.id,a).then(function(e){n.updateItem(t.events,e.data),Materialize.toast("Curso atualizado",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar curso",3e3)}).finally(function(){t.load=!0})},t.deleteEvent=function(a){t.load=!1,e.destroy(a.id).then(function(e){n.deleteItem(t.events,a),Materialize.toast("Curso deletado",3e3)}).catch(function(){Materialize.toast("Erro ao excluir curso",3e3)}).finally(function(){t.load=!0})},t.modalEdit=function(e){t.modalEvent=angular.copy(e),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalEvent=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("AdminEventShowController",["$scope","$stateParams","CurrentUser","InstructionAPI","EventAPI","LectureAPI","$filter","ManageList",function(t,e,a,n,o,i,r,s){function l(t){var e=r("date")(t.start_date,"yyyy"),a=r("date")(t.start_date,"MM")<7?1:2,n=e+"/"+a;t.season=n}t.user=a,function(){t.load=!1,o.show(e.eventID).then(function(e){t.event=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações do curso",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,o.getInstructions(e.eventID).then(function(e){t.instructions=e.data,t.instructions.forEach(function(t){l(t)})}).catch(function(){Materialize.toast("Erro ao carregar disciplinas cadastradas",3e3)}).finally(function(){t.load=!0})}(),t.findLectures=function(){t.load=!1,i.index().then(function(e){t.lectures=e.data}).catch(function(){Materialize.toast("Erro ao carregar disciplinas disponíveis",3e3)}).finally(function(){t.load=!0})},t.createInstruction=function(a){t.load=!1,a.lecture=a.lecture.id,a.event=e.eventID,a.start_date=r("toDate")(a.start_date),a.end_date=r("toDate")(a.end_date),n.create(a).then(function(e){l(e.data),t.instructions.push(e.data),Materialize.toast("Disciplina Adicionada",3e3)}).catch(function(){Materialize.toast("Erro ao adicionar disciplina",3e3)}).finally(function(){t.load=!0})},t.deleteInstruction=function(e){t.load=!1,n.destroy(e.id).then(function(a){s.deleteItem(t.instructions,e),Materialize.toast("Disciplina removida",3e3)}).catch(function(){Materialize.toast("Erro ao remover disciplina",3e3)}).finally(function(){t.load=!0})},t.modalAdd=function(e){t.modalInstruction={},t.modalInstruction.lecture=angular.copy(e),$("#modal-add").openModal()},t.modalRemove=function(e){t.modalInstruction=angular.copy(e),$("#modal-remove").openModal()}}]),oddin.controller("AdminInstructionShowController",["$scope","$stateParams","CurrentUser","InstructionAPI","PersonAPI","EnrollAPI","ManageList",function(t,e,a,n,o,i,r){t.user=a,function(){n.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)})}(),t.findParticipants=function(){t.load=!1,n.getParticipants(e.instructionID).then(function(e){t.participants=e.data}).catch(function(){Materialize.toast("Erro ao carregar participantes da disciplina",3e3)}).finally(function(){t.load=!0})},t.findAvailableParticipants=function(){t.load=!1,o.index().then(function(a){return t.registeredUsers=a.data,n.getParticipants(e.instructionID)}).then(function(e){t.participants=e.data,t.availableUsers=t.registeredUsers.filter(function(e,a){var n=t.participants.findIndex(function(t){return t.person.id==e.id});if(n<0)return!0})}).catch(function(){Materialize.toast("Erro ao carregar usuários cadastrados",3e3)}).finally(function(){t.load=!0})},t.createEnroll=function(a){t.load=!1;var n={person_id:a.id,instruction_id:e.instructionID,profile:a.enrollProfile?1:0};i.create(n).then(function(e){t.participants.push(e.data),r.deleteItem(t.availableUsers,e.data.person),Materialize.toast("Usuário cadastrado",3e3)}).catch(function(){Materialize.toast("Erro ao adicionar usuário",3e3)}).finally(function(){t.load=!0})},t.deleteEnroll=function(e){t.load=!1,i.destroy(e.id).then(function(a){r.deleteItem(t.participants,e),t.availableUsers&&t.availableUsers.push(e.person),Materialize.toast("Usuário removido",3e3)}).catch(function(){Materialize.toast("Erro ao remover usuário",3e3)}).finally(function(){t.load=!0})},t.modalRemove=function(e){t.modalParticipant=angular.copy(e),$("#modal-remove").openModal()}}]),oddin.controller("AdminLecturesController",["$scope","CurrentUser","LectureAPI","ManageList",function(t,e,a,n){t.user=e,function(){t.load=!1,a.index().then(function(e){t.lectures=e.data}).catch(function(){Materialize.toast("Erro ao carregar disciplinas",3e3)}).finally(function(){t.load=!0})}(),t.createLecture=function(e){t.load=!1,a.create(e).then(function(e){t.lectures.push(e.data),Materialize.toast("Disciplina cadastrada",3e3)}).catch(function(){Materialize.toast("Erro ao cadastrar disciplina",3e3)}).finally(function(){delete t.newLecture,t.load=!0})},t.updateLecture=function(e){t.load=!1,a.update(e.id,e).then(function(e){n.updateItem(t.lectures,e.data),Materialize.toast("Disciplina atualizada",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar disciplina",3e3)}).finally(function(){t.load=!0})},t.deleteLecture=function(e){t.load=!1,a.destroy(e.id).then(function(a){n.deleteItem(t.lectures,e),Materialize.toast("Disciplina deletada",3e3)}).catch(function(){Materialize.toast("Erro ao excluir disciplina",3e3)}).finally(function(){t.load=!0})},t.modalEdit=function(e){t.modalLecture=angular.copy(e),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalLecture=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("AdminUsersController",["$scope","CurrentUser","PersonAPI","ManageList",function(t,e,a,n){t.user=e,function(){t.load=!1,a.index().then(function(e){t.users=e.data}).catch(function(){Materialize.toast("Erro ao carregar usuários",3e3)}).finally(function(){t.load=!0})}(),t.createUser=function(e){t.load=!1,a.create(e).then(function(e){t.users.push(e.data),Materialize.toast("Usuário cadastrado",3e3)}).catch(function(){Materialize.toast("Erro ao cadastrar usuário",3e3)}).finally(function(){delete t.newUser,t.load=!0})},t.updateUser=function(e){t.load=!1,a.update(e.id,e).then(function(e){n.updateItem(t.users,e.data),Materialize.toast("Usuário atualizado",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar usuário",3e3)}).finally(function(){t.load=!0})},t.deleteUser=function(e){t.load=!1,a.destroy(e.id).then(function(a){n.deleteItem(t.users,e),Materialize.toast("Usuário excluído",3e3)}).catch(function(){Materialize.toast("Erro ao excluir usuário",3e3)}).finally(function(){t.load=!0})},t.modalEdit=function(e){t.modalUser=angular.copy(e),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalUser=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("DatesController",["$scope","$stateParams","DateAPI","InstructionAPI","CurrentUser","$filter","ManageList",function(t,e,a,n,o,i,r){t.user=o,function(){t.load=!1,n.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,n.getDates(e.instructionID).then(function(e){t.dates=e.data}).catch(function(){Materialize.toast("Erro ao carregar datas importantes",3e3)}).finally(function(){t.load=!0})}(),t.createDate=function(a){t.load=!1,a.date=i("toDate")(a.date,a.time),n.createDate(e.instructionID,a).then(function(e){t.dates.push(e.data),Materialize.toast("Data cadastrada",3e3)}).catch(function(){Materialize.toast("Erro ao cadastrar data",3e3)}).finally(function(){delete t.newDate,t.load=!0})},t.updateDate=function(e){t.load=!1,e.date=i("toDate")(e.date,e.time),a.update(e.id,e).then(function(e){r.updateItem(t.dates,e.data),Materialize.toast("Data atualizada",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar data",3e3)}).finally(function(){t.load=!0})},t.deleteDate=function(e){t.load=!1,a.destroy(e.id).then(function(a){r.deleteItem(t.dates,e),Materialize.toast("Data deletada",3e3)}).catch(function(){Materialize.toast("Erro ao excluir data",3e3)}).finally(function(){t.load=!0})},t.modalEdit=function(e){t.modalDate=angular.copy(e),t.modalDate.time=i("date")(t.modalDate.date,"HHmm"),t.modalDate.date=i("date")(t.modalDate.date,"ddMMyyyy"),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalDate=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("FAQsController",["$scope","$stateParams","InstructionAPI","FaqAPI","CurrentUser","ManageList",function(t,e,a,n,o,i){t.user=o,t.answerButtonText="Ver Resposta",function(){t.load=!1,a.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,a.getFAQs(e.instructionID).then(function(e){t.faqs=e.data}).catch(function(){Materialize.toast("Erro ao carregar FAQs",3e3)}).finally(function(){t.load=!0})}(),t.createFAQ=function(n){t.load=!1,a.createFAQ(e.instructionID,n).then(function(e){t.faqs.push(e.data),Materialize.toast("FAQ postada",3e3)}).catch(function(t){Materialize.toast("Não foi possível postar a FAQ",3e3)}).finally(function(){delete t.newFAQ,t.load=!0})},t.updateFAQ=function(e){t.load=!1,n.update(e.id,e).then(function(e){i.updateItem(t.faqs,e.data),Materialize.toast("FAQ atualizada",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar FAQ",3e3)}).finally(function(){t.load=!0})},t.deleteFAQ=function(e){t.load=!1,n.destroy(e.id).then(function(a){i.deleteItem(t.faqs,e),Materialize.toast("FAQ deletada",3e3)}).catch(function(){Materialize.toast("Erro ao excluir FAQ",3e3)}).finally(function(){t.load=!0})},t.displayAnswer=function(e){"none"==$("#answer-"+e.id).css("display")?($("#answer-"+e.id).css("display","block"),t.answerButtonText="Ocultar Resposta"):($("#answer-"+e.id).css("display","none"),t.answerButtonText="Ver Resposta")},t.modalEdit=function(e){t.modalFAQ=angular.copy(e),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalFAQ=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("InstructionsController",["$scope","$cookies","$state","CurrentUser","InstructionAPI","$filter",function(t,e,a,n,o,i){function r(e){var a={};t.seasons=e.map(function(t){var e=i("date")(t.start_date,"MM")<7?1:2,n=i("date")(t.start_date,"yyyy"),o=n+"/"+e;if(!a.hasOwnProperty(o))return a[o]=!0,{label:o,instructions:[]}}).filter(function(t){return"undefined"!=typeof t}),t.seasons.forEach(function(t){e.forEach(function(e){var a=i("date")(e.start_date,"yyyy");a+="/"+(i("date")(e.start_date,"MM")<7?1:2),t.label==a&&t.instructions.push(e)})})}t.user=n,function(){t.load=!1,o.index().then(function(t){r(t.data)}).catch(function(t){Materialize.toast("Erro ao carregar disciplinas",3e3)}).finally(function(){t.load=!0})}(),t.enterInstruction=function(t){e.get("profile")?a.go("presentations",{instructionID:t.id}):o.getProfile(t.id).then(function(n){e.put("profile",n.data.profile),a.go("presentations",{instructionID:t.id})}).catch(function(){Materialize.toast("Erro ao tentar entrar em "+t.lecture.name,3e3)})}}]),oddin.controller("LoginController",["$scope","$window","LoginAPI","$cookies","$location","$state",function(t,e,a,n,o,i){t.load=!0,t.login=function(o){t.load=!1,a.login(o).then(function(t){if(o.persist){var a=new Date;a.setMonth(a.getMonth()+1),n.put("session",n.get("session"),{expires:a})}t.data.person.admin&&n.put("admin",!0),e.location.href="/home"}).catch(function(t){401==t.status&&Materialize.toast("Usuário ou senha inválida",3e3),t.status>=500&&Materialize.toast("Erro no servidor",3e3)}).finally(function(){t.load=!0,delete t.user})},t.logout=function(){a.logout().then(function(){n.remove("session"),n.remove("profile"),n.remove("admin"),e.location.href="/"}).catch(function(){Materialize.toast("Não foi possível sair da aplicação")})},t.recoverPassword=function(e){t.load=!1,a.recoverPassword(e).then(function(){Materialize.toast("Um Email com o link para recuperação de senha será enviado para "+e.email,3e3),i.go("login")}).catch(function(){Materialize.toast("Não foi possível enviar o email de recuperação de senha",3e3)}).finally(function(){t.load=!0,delete t.user})},t.redefinePassword=function(e){return t.load=!1,e.password!==e.passwordConfirmation?(t.load=!0,delete t.user,void Materialize.toast("As senhas estão diferentes",3e3)):(e.token=o.search().token,void a.redefinePassword(e).then(function(){Materialize.toast("Senha redefinida com sucesso",3e3),i.go("login")}).catch(function(){Materialize.toast("Erro ao redefinir senha",3e3)}).finally(function(){t.load=!0,delete t.user}))}}]),oddin.controller("MaterialsController",["$http","$scope","$stateParams","InstructionAPI","MaterialAPI","CurrentUser","ManageList",function(t,e,a,n,o,i,r){e.user=i,function(){e.load=!1,n.show(a.instructionID).then(function(t){e.instruction=t.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){e.load=!0})}(),function(){e.load=!1,n.getMaterials(a.instructionID).then(function(t){e.materials=t.data}).catch(function(){Materialize.toast("Erro ao carregar material",3e3)}).finally(function(){e.load=!0})}(),e.downloadMaterial=function(t){e.load=!1,o.show(t.id).then(function(e){var a=document.createElement("a");a.setAttribute("href",e.data.url),a.setAttribute("download",!0),hiddenLink=document.getElementById("hidden-link"),hiddenLink.appendChild(a),a.click(),hiddenLink.removeChild(a),Materialize.toast("Fazendo download de "+t.name,3e3)}).catch(function(){Materialize.toast("Erro ao baixar '"+t.name,3e3)}).finally(function(){e.load=!0})},e.createMaterial=function(){e.load=!1,n.createMaterial(a.instructionID).then(function(e){newMaterial=e.data,file=document.forms.uploadArchive.file.files[0],fd=new FormData;for(var a in newMaterial.fields)fd.append(a,newMaterial.fields[a]);return fd.append("file",file),t.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}).then(function(){return o.update(newMaterial.id,{name:file.name,mime:file.type})}).then(function(t){e.materials.push(t.data.material),Materialize.toast("O arquivo "+file.name+" foi postado",3e3)}).catch(function(){Materialize.toast("Erro ao fazer upload de arquivo",3e3)}).finally(function(){document.getElementById("new-material-file").value="",document.getElementById("new-material-description").value="",e.load=!0})},e.deleteMaterial=function(t){e.load=!1,o.destroy(t.id).then(function(a){r.deleteItem(e.materials,t),Materialize.toast("Material deletado",3e3)}).catch(function(){Materialize.toast("Erro ao excluir Material",3e3)}).finally(function(){e.load=!0})},e.modalDelete=function(t){e.modalMaterial=angular.copy(t),$("#modal-delete").openModal()}}]),oddin.controller("NoticesController",["$scope","$stateParams","InstructionAPI","CurrentUser",function(t,e,a,n){t.user=n,function(){t.load=!1,a.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,a.getNotices(e.instructionID).then(function(e){t.notices=e.data}).catch(function(){Materialize.toast("Erro ao carregar avisos",3e3)}).finally(function(){t.load=!0})}(),t.createNotice=function(n){t.load=!1,a.createNotice(e.instructionID,n).then(function(e){t.notices.push(e.data),Materialize.toast("Aviso postado",3e3)}).catch(function(t){Materialize.toast("Não foi possível postar o aviso",3e3)}).finally(function(){delete t.newNotice,t.load=!0})}}]),oddin.controller("ParticipantsController",["$scope","$stateParams","InstructionAPI","CurrentUser",function(t,e,a,n){t.user=n,function(){t.load=!1,a.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,a.getParticipants(e.instructionID).then(function(e){t.participants=e.data}).catch(function(){Materialize.toast("Erro ao carregar participantes",3e3)}).finally(function(){t.load=!0})}()}]),oddin.controller("PresentationMaterialController",["$scope","$stateParams","$http","CurrentUser","PresentationAPI","MaterialAPI","ManageList",function(t,e,a,n,o,i,r){t.user=n,function(){t.load=!1,o.show(e.presentationID).then(function(e){t.presentation=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da aula",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,o.getMaterials(e.presentationID).then(function(e){t.materials=e.data}).catch(function(){Materialize.toast("Erro ao carregar materiais",3e3)}).finally(function(){t.load=!0})}(),t.createMaterial=function(){t.load=!1,o.createMaterial(e.presentationID).then(function(t){newMaterial=t.data,file=document.forms.uploadArchive.file.files[0],fd=new FormData;for(var e in newMaterial.fields)fd.append(e,newMaterial.fields[e]);return fd.append("file",file),a.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}).then(function(){return i.update(newMaterial.id,{name:file.name,mime:file.type})}).then(function(e){t.materials.push(e.data.material),Materialize.toast("O arquivo "+file.name+" foi postado",3e3)}).catch(function(){Materialize.toast("Erro ao fazer upload de material",3e3)}).finally(function(){document.getElementById("new-material-file").value="",document.getElementById("new-material-description").value="",t.load=!0})},t.downloadMaterial=function(e){t.load=!1,i.show(e.id).then(function(t){var a=document.createElement("a");a.setAttribute("href",t.data.url),a.setAttribute("download",!0),hiddenLink=document.getElementById("hidden-link"),hiddenLink.appendChild(a),a.click(),Materialize.toast("Fazendo download de "+e.name,3e3),hiddenLink.removeChild(a)}).catch(function(){Materialize.toast("Erro ao fazer download de material",3e3)}).finally(function(){t.load=!0})},t.deleteMaterial=function(e){t.load=!1,i.destroy(e.id).then(function(a){r.deleteItem(t.materials,e),Materialize.toast("Material excluído",3e3)}).catch(function(){Materialize.toast("Erro ao excluir material",3e3)}).finally(function(){t.load=!0})},t.modalDelete=function(e){t.modalMaterial=angular.copy(e),$("#modal-delete").openModal()}}]),oddin.controller("PresentationsController",["$scope","$stateParams","InstructionAPI","PresentationAPI","CurrentUser","ManageList",function(t,e,a,n,o,i){t.user=o,function(){t.load=!1,a.show(e.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,a.getPresentations(e.instructionID).then(function(e){t.presentations=e.data}).catch(function(){Materialize.toast("Erro ao carregar aulas",3e3)}).finally(function(){t.load=!0})}(),t.createPresentation=function(n){t.load=!1,a.createPresentation(e.instructionID,n).then(function(e){t.presentations.push(e.data),Materialize.toast("A aula "+n.subject+" foi criada",3e3)}).catch(function(t){Materialize.toast("Não foi possível criar uma nova aula",3e3)}).finally(function(){delete t.newPresentation,t.load=!0})},t.closePresentation=function(e){t.load=!1,n.close(e.id).then(function(a){i.updateItem(t.presentations,a.data),Materialize.toast("A aula '"+e.subject+"' foi finalizada",3e3)}).catch(function(t){Materialize.toast("Erro ao finalizar aula",3e3)}).finally(function(){t.load=!0})},t.modalClose=function(e){t.modalPresentation=angular.copy(e),$("#modal-close").openModal()}}]),oddin.controller("PresentationShowController",["$scope","$stateParams","PresentationAPI","QuestionAPI","AnswerAPI","CurrentUser",function(t,e,a,n,o,i){t.user=i,t.filter=!1;const r=io.connect("http://socket-oddin.rhcloud.com:8000/presentation");!function(){t.load=!1,a.show(e.presentationID).then(function(e){t.presentation=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da aula",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,a.getQuestions(e.presentationID).then(function(e){t.questions=e.data}).catch(function(){Materialize.toast("Erro ao carregar perguntas",3e3)}).finally(function(){t.load=!0})}(),t.createQuestion=function(n){t.load=!1,void 0==n.anonymous&&(n.anonymous=!1),a.createQuestion(e.presentationID,n).then(function(t){r.emit("POST /questions",[t.data]),Materialize.toast("Dúvida postada",3e3)}).catch(function(t){Materialize.toast("Não foi possível postar a dúvida",3e3)}).finally(function(){delete t.newQuestion,t.load=!0})},t.upvoteQuestion=function(e){t.load=!1,n.upvote(e.id).then(function(){e.upvotes++,e.my_vote=1}).catch(function(){Materialize.toast("Erro ao votar na dúvida",3e3)}).finally(function(){t.load=!0})},t.unvoteQuestion=function(e){t.load=!1,n.destroyVote(e.id).then(function(){e.upvotes--,e.my_vote=0}).catch(function(t){Materialize.toast("Não foi possível cancelar o voto",3e3)}).finally(function(){t.load=!0})},t.findAnswers=function(e){t.load=!1,n.getAnswers(e.id).then(function(t){e.answers=t.data}).catch(function(t){Materialize.toast("Erro ao carregar resposta",3e3)}).finally(function(){t.load=!0})},t.closeAnswers=function(t){t.answers=void 0},t.createAnswer=function(e){t.load=!1,n.createAnswer(t.selectedQuestion.id,e).then(function(){t.selectedQuestion.has_answer=!0,t.findAnswers(t.selectedQuestion),Materialize.toast("Resposta postada",3e3)}).catch(function(t){Materialize.toast("Não foi possível postar a resposta",3e3)}).finally(function(){delete t.newAnswer,t.load=!0})},t.upvoteAnswer=function(e){t.load=!1,o.upvote(e.id).then(function(){0==e.my_vote?e.upvotes++:e.my_vote==-1&&(e.upvotes+=2),e.my_vote=1}).catch(function(t){Materialize.toast("Erro ao votar na resposta",3e3)}).finally(function(){t.load=!0})},t.unvoteAnswer=function(e){t.load=!1,o.destroyVote(e.id).then(function(){1==e.my_vote?e.upvotes--:e.upvotes++,e.my_vote=0}).catch(function(t){Materialize.toast("Não foi possível cancelar o voto",3e3)}).finally(function(){t.load=!0})},t.downvoteAnswer=function(e){t.load=!1,o.downvote(e.id).then(function(){0==e.my_vote?e.upvotes--:1==e.my_vote&&(e.upvotes-=2),e.my_vote=-1}).catch(function(t){Materialize.toast("Erro ao votar na resposta",3e3)}).finally(function(){t.load=!0})},t.acceptAnswer=function(e){t.load=!1,o.accept(e.id).then(function(){e.accepted=!0;for(var a=0;a<t.questions.length;a++)if(t.questions[a].id==e.question.id){t.questions[a].answered=!0;break}}).catch(function(){Materialize.toast("Erro ao aceitar resposta",3e3)}).finally(function(){t.load=!0})},t.rejectAnswer=function(e){t.load=!1,o.reject(e.id).then(function(){e.accepted=!1;for(var a=0;a<t.questions.length;a++)if(t.questions[a].id==e.question.id){t.questions[a].answered=!1;break}}).catch(function(){Materialize.toast("Erro ao recusar resposta",3e3)}).finally(function(){t.load=!0})},t.modalCreateAnswer=function(e){t.selectedQuestion=e,$("#modal-create-answer").openModal()},t.enableFilter=function(){t.filter=!0,$("#post-order").removeClass("filter-item-active"),$("#ranking-order").addClass("filter-item-active")},t.disableFilter=function(){t.filter=!1,$("#ranking-order").removeClass("filter-item-active"),$("#post-order").addClass("filter-item-active")},r.on("POST /questions",function(e){t.$apply(function(){e.forEach(function(e){t.questions.push(e)})})})}]),oddin.controller("SurveysController",["$scope","$cookies","$stateParams","InstructionAPI","SurveyAPI","AlternativeAPI","CurrentUser","ManageList",function(t,e,a,n,o,i,r,s){t.user=r,t.newSurvey={alternatives:[{}]},function(){t.load=!1,n.show(a.instructionID).then(function(e){t.instruction=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,n.getSurveys(a.instructionID).then(function(e){t.surveys=e.data}).catch(function(){Materialize.toast("Erro ao carregar Enquetes",3e3)}).finally(function(){t.load=!0})}(),t.createSurvey=function(e){t.load=!1,n.createSurvey(a.instructionID,e).then(function(e){t.surveys.push(e.data),Materialize.toast("Enquete criada",3e3)}).catch(function(t){Materialize.toast("Não foi possível criar a enquete",3e3)}).finally(function(){t.newSurvey={alternatives:[{}]},t.load=!0})},t.updateSurvey=function(e){t.load=!1,o.update(e.id,e).then(function(e){s.updateItem(t.surveys,e.data),Materialize.toast("Enquete atualizada",3e3)}).catch(function(){Materialize.toast("Erro ao atualizar Enquete",3e3)}).finally(function(){t.load=!0})},t.deleteSurvey=function(e){t.load=!1,o.destroy(e.id).then(function(a){s.deleteItem(t.surveys,e),Materialize.toast("Enquete deletada",3e3)}).catch(function(){Materialize.toast("Erro ao excluir enquete",3e3)}).finally(function(){t.load=!0})},t.closeSurvey=function(e){t.load=!1,o.close(e.id).then(function(e){s.updateItem(t.surveys,e.data),Materialize.toast("Enquete encerrada",3e3)}).catch(function(){Materialize.toast("Erro ao encerrar enquete",3e3)}).finally(function(){t.load=!0})},t.makeChoice=function(e){return e.choice?(t.load=!1,void i.choose(e.choice).then(function(e){s.updateItem(t.surveys,e.data),Materialize.toast("Voto realizado com sucesso",3e3)}).catch(function(){Materialize.toast("Erro ao votar",3e3)}).finally(function(){t.load=!0})):void Materialize.toast("Você deve selecionar uma alternativa antes de votar",3e3)},t.addNewAlternative=function(t){t.alternatives.push({})},t.removeAlternative=function(t){var e=t.alternatives.length-1;t.alternatives.splice(e)},t.displayAnswers=function(t){"none"==$("#answers-"+t.id).css("display")?$("#answers-"+t.id).css("display","block"):$("#answers-"+t.id).css("display","none")},t.displayAlternativesButton=function(t){return"none"==$("#answers-"+t.id).css("display")?0==e.get("profile")?"Ver Alternativas":"Ver Resultado":0==e.get("profile")?"Ocultar Alternativas":"Ocultar Resultado"},t.modalEdit=function(e){t.modalSurvey=angular.copy(e),$("#modal-edit").openModal()},t.modalDelete=function(e){t.modalSurvey=angular.copy(e),$("#modal-delete").openModal()},t.modalClose=function(e){t.modalSurvey=angular.copy(e),$("#modal-close").openModal()}}]),oddin.controller("WorksController",["$http","$scope","$stateParams","$filter","InstructionAPI","WorkAPI","MaterialAPI","CurrentUser","$filter","$q","ManageList",function(t,e,a,n,o,i,r,s,n,l,c){function u(t){currentWork=t.data;var e=l.defer();return e.resolve(),e.promise}function d(){return r.destroy(currentWork.materials[0].id)}function f(){return i.createMaterial(currentWork.id)}function p(e){newMaterial=e.data,file=document.forms.uploadArchive.file.files[0],fd=new FormData;for(var a in newMaterial.fields)fd.append(a,newMaterial.fields[a]);return fd.append("file",file),t.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}function m(e){newMaterial=e.data,file=document.forms.updateArchive.file.files[0],fd=new FormData;for(var a in newMaterial.fields)fd.append(a,newMaterial.fields[a]);return fd.append("file",file),t.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}function h(){return r.update(newMaterial.id,{name:file.name,
mime:file.type})}function v(){return i.show(currentWork.id)}function y(t){e.works.push(t.data),Materialize.toast("A tarefa foi criada",3e3)}function M(t){c.updateItem(e.works,t.data),Materialize.toast("A tarefa foi atualizada",3e3)}e.user=s,function(){e.load=!1,o.show(a.instructionID).then(function(t){e.instruction=t.data}).catch(function(){Materialize.toast("Erro ao carregar informações da disciplina",3e3)}).finally(function(){e.load=!0})}(),function(){e.load=!1,o.getWorks(a.instructionID).then(function(t){e.works=t.data}).catch(function(){Materialize.toast("Erro ao carregar tarefas",3e3)}).finally(function(){e.load=!0})}(),e.createWork=function(t){return e.load=!1,t.deadline=n("toDate")(t.deadline),document.forms.uploadArchive.file.files[0]?void o.createWork(a.instructionID,t).then(u).then(f).then(p).then(h).then(v).then(y).catch(function(){Materialize.toast("Erro ao criar nova tarefa",3e3)}).finally(function(){document.getElementById("new-work-file").value="",delete e.newWork,e.load=!0}):void o.createWork(a.instructionID,t).then(y).catch(function(){Materialize.toast("Erro ao criar nova tarefa",3e3)}).finally(function(){delete e.newWork,e.load=!0})},e.updateWork=function(t){return e.load=!1,t.deadline=n("toDate")(t.deadline),t.materials.length>0&&document.forms.updateArchive.file.files[0]?void i.update(t.id,t).then(u).then(d).then(f).then(m).then(h).then(v).then(M).catch(function(){Materialize.toast("Erro ao atualizar tarefa",3e3)}).finally(function(){e.load=!0}):t.materials.length>0&&!document.forms.updateArchive.file.files[0]?void i.update(t.id,t).then(u).then(d).then(v).then(M).catch(function(){Materialize.toast("Erro ao atualizar tarefa",3e3)}).finally(function(){e.load=!0}):0==t.materials.length&&document.forms.updateArchive.file.files[0]?void i.update(t.id,t).then(u).then(f).then(m).then(h).then(v).then(M).catch(function(){Materialize.toast("Erro ao atualizar tarefa",3e3)}).finally(function(){e.load=!0}):void i.update(t.id,t).then(M).catch(function(){Materialize.toast("Erro ao atualizar tarefa",3e3)}).finally(function(){e.load=!0})},e.deleteWork=function(t){e.load=!1,i.destroy(t.id).then(function(){return t.materials.length>0?void r.destroy(t.materials[0].id).then(function(){c.deleteItem(e.works,t),Materialize.toast("Tarefa deletada",3e3)}).catch(function(){Materialize.toast("Erro ao deletar tarefa",3e3)}):(c.deleteItem(e.works,t),void Materialize.toast("Tarefa deletada",3e3))}).catch(function(){Materialize.toast("Erro ao deletar tarefa",3e3)}).finally(function(){e.load=!0})},e.downloadDescription=function(t){e.load=!1,r.show(t.materials[0].id).then(function(e){var a=document.createElement("a");a.setAttribute("href",e.data.url),a.setAttribute("download",!0),hiddenLink=document.getElementById("hidden-link"),hiddenLink.appendChild(a),a.click(),hiddenLink.removeChild(a),Materialize.toast("Baixando especificação: "+t.materials[0].name,3e3)}).catch(function(){Materialize.toast("Erro ao baixar especificação",3e3)}).finally(function(){e.load=!0})},e.modalEdit=function(t){e.modalWork=angular.copy(t),e.modalWork.deadline=n("date")(e.modalWork.deadline,"ddMMyyyy"),t.materials[0]&&(e.modalWork.materialName=t.materials[0].name),$("#modal-edit").openModal()},e.modalDelete=function(t){e.modalWork=angular.copy(t),$("#modal-delete").openModal()}}]),oddin.controller("WorkShowController",["$scope","$stateParams","$http","CurrentUser","WorkAPI","MaterialAPI","SubmissionAPI","$q","ManageList",function(t,e,a,n,o,i,r,s,l){function c(t){currentSubmission=t.data;var e=s.defer();return e.resolve(),e.promise}function u(){return i.destroy(currentSubmission.materials[0].id)}function d(){return r.createMaterial(currentSubmission.id)}function f(t){newMaterial=t.data,file=document.forms.uploadArchive.file.files[0],fd=new FormData;for(var e in newMaterial.fields)fd.append(e,newMaterial.fields[e]);return fd.append("file",file),a.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}function p(t){newMaterial=t.data,file=document.forms.updateArchive.file.files[0],fd=new FormData;for(var e in newMaterial.fields)fd.append(e,newMaterial.fields[e]);return fd.append("file",file),a.post(newMaterial.url,fd,{headers:{"Content-Type":void 0}})}function m(){return i.update(newMaterial.id,{name:file.name,mime:file.type})}function h(){return r.show(currentSubmission.id)}function v(e){t.mySubmission=e.data,Materialize.toast("Trabalho postado",3e3)}function y(e){t.mySubmission=e.data,Materialize.toast("O trabalho foi atualizado",3e3)}t.user=n,function(){t.load=!1,o.show(e.workID).then(function(e){t.work=e.data}).catch(function(){Materialize.toast("Erro ao carregar informações da tarefa",3e3)}).finally(function(){t.load=!0})}(),function(){t.load=!1,o.getSubmissions(e.workID).then(function(e){t.submissions=e.data;for(var a=0;a<t.submissions.length;a++)if(t.submissions[a].person.id==t.user.id){t.mySubmission=t.submissions[a];break}}).catch(function(){Materialize.toast("Erro ao carregar trabalhos",3e3)}).finally(function(){t.load=!0})}(),t.createSubmission=function(a){return t.load=!1,document.forms.uploadArchive.file.files[0]?void o.createSubmission(e.workID,a).then(c).then(d).then(f).then(m).then(h).then(v).catch(function(){Materialize.toast("Erro ao postar trabalho",3e3)}).finally(function(){document.getElementById("new-submission-file").value="",delete t.newSubmission,t.load=!0}):void o.createSubmission(e.workID,a).then(v).catch(function(){Materialize.toast("Erro ao postar trabalho",3e3)}).finally(function(){delete t.newSubmission,t.load=!0})},t.updateSubmission=function(e){return t.load=!1,e.materials.length>0&&document.forms.updateArchive.file.files[0]?void r.update(e.id,e).then(c).then(u).then(d).then(p).then(m).then(h).then(y).catch(function(){Materialize.toast("Erro ao atualizar trabalho",3e3)}).finally(function(){t.load=!0}):e.materials.length>0&&!document.forms.updateArchive.file.files[0]?void r.update(e.id,e).then(c).then(u).then(h).then(y).catch(function(){Materialize.toast("Erro ao atualizar trabalho",3e3)}).finally(function(){t.load=!0}):0==e.materials.length&&document.forms.updateArchive.file.files[0]?void r.update(e.id,e).then(c).then(d).then(p).then(m).then(h).then(y).catch(function(){Materialize.toast("Erro ao atualizar trabalho",3e3)}).finally(function(){t.load=!0}):void r.update(e.id,e).then(y).catch(function(){Materialize.toast("Erro ao atualizar trabalho",3e3)}).finally(function(){t.load=!0})},t.deleteSubmission=function(e){t.load=!1,r.destroy(e.id).then(function(){return e.materials.length>0?void i.destroy(e.materials[0].id).then(function(){delete t.mySubmission,Materialize.toast("Trabalho deletado",3e3)}).catch(function(){Materialize.toast("Erro ao deletar trabalho",3e3)}):(delete t.mySubmission,void Materialize.toast("Trabalho deletado",3e3))}).catch(function(){Materialize.toast("Erro ao deletar trabalho",3e3)}).finally(function(){t.load=!0})},t.downloadSubmission=function(e){t.load=!1,i.show(e.materials[0].id).then(function(t){var a=document.createElement("a");a.setAttribute("href",t.data.url),a.setAttribute("download",!0),hiddenLink=document.getElementById("hidden-link"),hiddenLink.appendChild(a),a.click(),hiddenLink.removeChild(a),Materialize.toast("Baixando trabalho: "+e.materials[0].name,3e3)}).catch(function(){Materialize.toast("Erro ao baixar trabalho",3e3)}).finally(function(){t.load=!0})},t.modalDelete=function(e){t.modalMySubmission=angular.copy(e),$("#modal-delete").openModal()},t.modalEdit=function(e){t.modalMySubmission=angular.copy(e),e.materials[0]&&(t.modalMySubmission.materialName=e.materials[0].name),$("#modal-edit").openModal()}}]),oddin.directive("oddinFab",function(){return{replace:!0,restrict:"AE",scope:{trigger:"@",modalTrigger:"@",icon:"@"},templateUrl:"/components/fab"}}),oddin.directive("oddinHeader",function(){return{templateUrl:"/components/header",replace:!0,restrict:"AE",scope:{title:"@",btnType:"@",sideBar:"@",toStateUrl:"@",logo:"@"}}}),oddin.directive("oddinPreloader",function(){return{replace:!0,restrict:"AE",scope:{sideBar:"@",loadVar:"="},templateUrl:"/components/preloader"}}),oddin.filter("toDate",function(){return function(t,e){var a=parseInt(t.substring(0,2)),n=parseInt(t.substring(2,4))-1,o=parseInt(t.substring(4,8)),i=0,r=0;return e&&(i=parseInt(e.substring(0,2)),r=parseInt(e.substring(2,4))),new Date(o,n,a,i,r)}}),oddin.factory("AlternativeAPI",["$http",function(t){var e=function(e){return t.post("/api/alternatives/"+e+"/choose")};return{choose:e}}]),oddin.factory("AnswerAPI",["$http",function(t){var e=function(e){return t.post("/api/answers/"+e+"/upvote")},a=function(e){return t.post("/api/answers/"+e+"/downvote")},n=function(e){return t.delete("/api/answers/"+e+"/vote")},o=function(e){return t.post("/api/answers/"+e+"/accept")},i=function(e){return t.delete("/api/answers/"+e+"/accept")};return{upvote:e,downvote:a,destroyVote:n,accept:o,reject:i}}]),oddin.factory("CurrentUser",["$cookies",function(t){return{id:JSON.parse(t.get("session").substring(2)).person.id,name:JSON.parse(t.get("session").substring(2)).person.name,email:JSON.parse(t.get("session").substring(2)).person.email}}]),oddin.factory("DateAPI",["$http",function(t){var e=function(e,a){return t.put("/api/dates/"+e,a)},a=function(e){return t.delete("/api/dates/"+e)};return{update:e,destroy:a}}]),oddin.factory("EnrollAPI",["$http",function(t){var e=function(e){return t.post("/api/enrolls/",e)},a=function(e){return t.delete("/api/enrolls/"+e)};return{create:e,destroy:a}}]),oddin.factory("EventAPI",["$http",function(t){var e=function(){return t.get("/api/events/")},a=function(e){return t.get("/api/events/"+e)},n=function(e){return t.post("/api/events/",e)},o=function(e,a){return t.put("/api/events/"+e,a)},i=function(e){return t.delete("/api/events/"+e)},r=function(e){return t.get("/api/events/"+e+"/instructions")};return{index:e,show:a,create:n,update:o,destroy:i,getInstructions:r}}]),oddin.factory("FaqAPI",["$http",function(t){var e=function(e,a){return t.put("/api/faqs/"+e,a)},a=function(e){return t.delete("/api/faqs/"+e)};return{update:e,destroy:a}}]),oddin.factory("InstructionAPI",["$http",function(t){var e=function(){return t.get("/api/instructions/")},a=function(e){return t.get("/api/instructions/"+e)},n=function(e){return t.post("api/instructions",e)},o=function(e){return t.delete("api/instructions/"+e)},i=function(e){return t.get("/api/instructions/"+e+"/profile")},r=function(e){return t.get("/api/instructions/"+e+"/presentations")},s=function(e){return t.get("/api/instructions/"+e+"/notices")},l=function(e){return t.get("/api/instructions/"+e+"/dates")},c=function(e){return t.get("/api/instructions/"+e+"/works")},u=function(e){return t.get("/api/instructions/"+e+"/materials")},d=function(e){return t.get("/api/instructions/"+e+"/participants")},f=function(e){return t.get("/api/instructions/"+e+"/faqs")},p=function(e){return t.get("/api/instructions/"+e+"/surveys")},m=function(e,a){return t.post("/api/instructions/"+e+"/presentations",a)},h=function(e,a){return t.post("/api/instructions/"+e+"/notices",a)},v=function(e,a){return t.post("/api/instructions/"+e+"/dates",a)},y=function(e,a){return t.post("/api/instructions/"+e+"/works",a)},M=function(e){return t.post("/api/instructions/"+e+"/materials")},g=function(e,a){return t.post("/api/instructions/"+e+"/faqs",a)},w=function(e,a){return t.post("/api/instructions/"+e+"/surveys",a)};return{index:e,show:a,create:n,destroy:o,getProfile:i,getPresentations:r,getNotices:s,getDates:l,getWorks:c,getMaterials:u,getParticipants:d,getFAQs:f,getSurveys:p,createPresentation:m,createNotice:h,createDate:v,createWork:y,createMaterial:M,createFAQ:g,createSurvey:w}}]),oddin.factory("LectureAPI",["$http",function(t){var e=function(){return t.get("/api/lectures/")},a=function(e){return t.get("/api/lectures/"+e)},n=function(e){return t.post("/api/lectures/",e)},o=function(e,a){return t.put("/api/lectures/"+e,a)},i=function(e){return t.delete("/api/lectures/"+e)};return{index:e,show:a,create:n,update:o,destroy:i}}]),oddin.factory("LoginAPI",["$http",function(t){var e=function(e){return t.post("/login",e)},a=function(){return t.post("/logout")},n=function(e){return t.post("/recover-password",e)},o=function(e){return t.post("/redefine-password",e)};return{login:e,logout:a,recoverPassword:n,redefinePassword:o}}]),oddin.factory("ManageList",function(){var t=function(t,e){var a=t.findIndex(function(t){return t.id==e.id});t[a]=e},e=function(t,e){var a=t.findIndex(function(t){return t.id==e.id});t.splice(a,1)};return{updateItem:t,deleteItem:e}}),oddin.factory("MaterialAPI",["$http",function(t){var e=function(e){return t.get("/api/materials/"+e)},a=function(e,a){return t.put("/api/materials/"+e,a)},n=function(e){return t.delete("/api/materials/"+e)};return{show:e,update:a,destroy:n}}]),oddin.factory("PersonAPI",["$http",function(t){var e=function(){return t.get("/api/person/")},a=function(e){return t.get("/api/person/"+e)},n=function(e){return t.post("/api/person/",e)},o=function(e,a){return t.put("/api/person/"+e,a)},i=function(e){return t.delete("/api/person/"+e)};return{index:e,show:a,create:n,update:o,destroy:i}}]),oddin.factory("PresentationAPI",["$http",function(t){var e=function(e){return t.get("/api/presentations/"+e)},a=function(e){return t.post("/api/presentations/"+e+"/close")},n=function(e){return t.get("/api/presentation/"+e+"/materials")},o=function(e){return t.get("/api/presentations/"+e+"/questions")},i=function(e){return t.post("/api/presentation/"+e+"/materials")},r=function(e,a){return t.post("/api/presentations/"+e+"/questions",a)};return{show:e,close:a,getMaterials:n,getQuestions:o,createMaterial:i,createQuestion:r}}]),oddin.factory("QuestionAPI",["$http",function(t){var e=function(e){return t.get("/api/questions/"+e+"/answers")},a=function(e,a){return t.post("/api/questions/"+e+"/answers",a)},n=function(e){return t.post("/api/questions/"+e+"/upvote")},o=function(e){return t.delete("/api/questions/"+e+"/vote")};return{getAnswers:e,createAnswer:a,upvote:n,destroyVote:o}}]),oddin.factory("SubmissionAPI",["$http",function(t){var e=function(e){return t.get("/api/submissions/"+e)},a=function(e,a){return t.put("/api/submissions/"+e,a)},n=function(e){return t.delete("/api/submissions/"+e)},o=function(e){return t.post("/api/submissions/"+e+"/materials")};return{show:e,update:a,destroy:n,createMaterial:o}}]),oddin.factory("SurveyAPI",["$http",function(t){var e=function(e,a){return t.put("/api/surveys/"+e,a)},a=function(e){return t.delete("/api/surveys/"+e)},n=function(e){return t.post("/api/surveys/"+e+"/close")};return{update:e,destroy:a,close:n}}]),oddin.factory("WorkAPI",["$http",function(t){var e=function(e){return t.get("/api/works/"+e)},a=function(e,a){return t.put("/api/works/"+e,a)},n=function(e){return t.delete("/api/works/"+e)},o=function(e){return t.post("/api/works/"+e+"/materials")},i=function(e,a){return t.post("/api/works/"+e+"/submissions",a)},r=function(e){return t.get("/api/works/"+e+"/submissions")};return{show:e,update:a,destroy:n,createMaterial:o,createSubmission:i,getSubmissions:r}}]),window.onpopstate=function(){$(".lean-overlay").remove()};
