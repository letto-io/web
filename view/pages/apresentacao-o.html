<!DOCTYPE HTML>
<html data-ng-app="BossEdu" data-ng-controller="presentationCtrl" data-ng-init="getPresentation()">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <title>Aula - {{presentation.lecture.code}}</title>

  <link rel="stylesheet" href="/view/vendor/bootstrap/dist/css/bootstrap.min.css" />
  <link rel="stylesheet" href="/view/vendor/font-awesome/css/font-awesome.min.css" />
  <link rel="stylesheet" href="/view/vendor/animate.css/animate.min.css" />
  <link rel="stylesheet" href="/view/css/custom.css" />
</head>
  <!-- Inicio do cabecalho -->
<body data-ng-cloak="true">
  <header>
    <nav class="navbar navbar-default navbar-fixed-top">
      <div class="container">
        <div class="navbar-header">
          <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false" aria-controls="navbar">
            <span class="sr-only">Toggle navigation</span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="navbar-brand" href="#">Mirage</a>
        </div>

        <div id="navbar" class="navbar-collapse collapse">
          <ul class="nav navbar-nav navbar-right">
            <li class="dropdown">
              <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false"><span class="fa fa-user"></span>  Usuário <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a href="/controller/logout"><span class="glyphicon glyphicon-log-out"></span>  Sair</a></li>
              </ul>
            </li>
          </ul>
          <ul class="nav navbar-nav">
            <li><a href="/app/instruction"><span class="glyphicon glyphicon-chevron-left"></span>Disciplinas</a></li>
            <li><a href="../historic">Histórico</a></li>
            <li><a href="../material">Material</a></li>
            <li><a href="../participants">Participantes</a></li>
          </ul>
        </div>
      </div>
    </nav>

    <!--Título Página-->
    <div class="page-header container">
      <h1>{{presentation.subject}}</h1>
    </div>
  </header>
  <!-- Fim do cabecalho -->

  <main>
    <!-- Inicio da div do conteudo -->
    <div class="container espacamento-inferior">
      <!-- Inicio do box da duvida -->
      <div class="row duvida-espacamento" data-ng-repeat="doubt in doubts | orderObjectBy:'-likes'">
        <!--Pergunta-->
        <div class="col-md-offset-2 col-md-8">
          <div class="doubt animated fadeIn">
            <!--Cabeçalho da Pergunta-->
            <div class="doubt__header">
              <div class="row">
                <div class="col-md-4 col-sm-6"><h4 class="doubt__pessoa">{{doubt.person.name}}</h4></div>
                <div class="col-md-offset-4 col-md-4 col-sm-offset-2 col-sm-4"><h4 class="doubt__time">{{doubt.date | date: 'dd/MM/yyyy'}} {{doubt.time}}</h4></div>
              </div>
            </div>
            <!--Conteúdo da Pergunta -->
            <div class="doubt__content">
              <div class="doubt__textbox">
                <p>{{doubt.text}}
                </p>
              </div>
            </div>
            <!--Opções do Usuário -->
            <div class="doubt__options">
              <div class="row">
                <div class="col-md-12">
                  <div class="doubt__interactive status-duvida">
                    <span class="fa" data-ng-class="{'btn-resp-fechada fa-lock': doubt.status == 2, 'btn-resp-none fa-unlock': doubt.status == 0, 'btn-resp-aberta fa-unlock-alt': doubt.status == 1}"></span>
                    <span class="icon_label hidden-xs">{{doubt.status == 0 ? "Não respondida" : (doubt.status == 1 ? "Respondida" : "Fechada")}}</span>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-xs-4">
                  <div class="doubt__interactive doubt-margin-top pull-left" data-ng-if="doubt.contributions > 0">
                    <button id="button_{{doubt.id}}" class="btn btn-link btn-respondido" data-ng-click="fetchAnswer(doubt)">
                      <span class="resposta-btn-icon glyphicon glyphicon-comment"></span>
                      <span class="icon_label hidden-xs">Resposta</span>
                    </button>
                  </div>
                </div>

                <div class="col-xs-4">
                  <div class="doubt__interactive doubt-margin-top center-block-custom" id="curtirComentario" data-ng-class="{interactive_checked: doubt.like}">
                    <a href="" data-ng-click="likeDoubt(doubt)">
                      <span class="glyphicon glyphicon-thumbs-up"></span>
                      <span class="icon_label hidden-xs">Gostei</span>
                    </a>
                    <span class="badge">{{doubt.likes}}</span>
                  </div>
                </div>

                <div class="col-xs-4">
                  <div class="doubt__interactive doubt-margin-top pull-right" id="entendi">
                    <a href="#">
                      <span class="glyphicon glyphicon-check btn-entendi"></span>
                      <span class="icon_label hidden-xs">Entendi</span>
                    </a>
                    <span class="badge">10</span>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!--Fim da Pergunta-->

        <!--Resposta-->
        <div data-ng-attr-id="{{doubt.id}}" class = "col-md-offset-2 col-md-8" data-ng-if="doubt.answers.length > 0">
          <div class="resposta animated fadeIn">
            <div class="abas_respostas">
              <ul class="nav nav-tabs" role="tablist">
                <li role="presentation" class="active"><a href="#texto" aria-controls="texto" role="tab" data-toggle="tab"><span class="fa fa-font fa-lg"></span></a></li>
                <li role="presentation"><a href="#audio" aria-controls="audio" role="tab" data-toggle="tab"><span class="fa fa-microphone fa-lg"></span></a></li>
                <li role="presentation"><a href="#video" aria-controls="video" role="tab" data-toggle="tab"><span class="fa fa-video-camera fa-lg"></span></a></li>
                <li role="presentation"><a href="#arquivo" aria-controls="arquivo" role="tab" data-toggle="tab"><span class="fa fa-paperclip fa-lg"></span></a></li>
              </ul>
              <div class="tab-content">
                <div role="tabpanel" class="tab-pane active" id="texto">
                  <div class="respostas_section" data-ng-repeat="answer in doubt.answers">
                    <div class="row">
                      <div class="col-md-4 col-sm-6"><h4 class="resposta__pessoa">{{answer.person.name}}</h4></div>
                      <div class="col-md-offset-4 col-md-4 col-sm-offset-2 col-sm-4"><h4 class="resposta__time"><!--{{answer.date | date: 'dd/MM/yyyy'}} {{answer.time}}-->{{answer.createdat}}</h4></div>
                    </div>
                    <div class="resposta__textbox">
                      <p>
                        {{answer.text}}
                      </p>
                    </div>
                  </div>
                </div>
                <div role="tabpanel" class="tab-pane" id="audio"><p>Áudio</p></div>
                <div role="tabpanel" class="tab-pane" id="video"><p>Vídeo</p></div>
                <div role="tabpanel" class="tab-pane" id="arquivo"><p>Download de Arquivo</p></div>
              </div>
            </div>
          </div>
        </div>
        <!--Fim da Resposta-->
      </div>
      <!-- Fim da dúvida -->
    </div>
    <!-- Fim do conteúdo principal -->

    <!-- Inicio do formulário fixo -->
    <div class="fixed">
      <div class="container">
        <div class="row">
          <div class="col-sm-offset-2 col-sm-8 col-sm-offset-2">
            <form class="form-duvida form-horizontal" data-ng-submit="sendDoubt(doubt)">
              <div class="form-group">
                <div class="col-sm-9">
                  <textarea name="texto" placeholder="Insira sua dúvida" data-ng-model="doubt.text" class="form-control" id="textarea_duvida"></textarea>
                  <div class="checkbox">
                    <label>
                      <input type="checkbox" data-ng-model="doubt.anonymous"> Enviar como anônimo
                    </label>
                  </div>
                </div>
                <div class="col-sm-3 ">
                  <input type="submit" value="Enviar" class="custom-button-lg"/>
                </div>
              </div>
            </form>
          </div>
        </div>
      </div>
    </div>
    <!-- Fim do formulário -->

  <!-- Fim da div do conteudo -->
  </main>
  <script src="/view/vendor/jquery/dist/jquery.min.js"></script>
  <script src="/view/vendor/bootstrap/dist/js/bootstrap.js"></script>
  <script src="/view/assets/socket.io-client/socket.io.js"></script>

  <script src="/view/js/utils.js"></script>
  <script type="application/javascript" src="/controller/config/app?callback=Util.setEnvironment"></script>

  <script src="/view/vendor/angular/angular.js"></script>
  <script src="/view/js/app.js"></script>
  <script src="/view/js/filter/orderObjectBy.js"></script>
  <script src="/view/js/controller/presentationCtrl.js"></script>
</body>
</html>
