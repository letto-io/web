doctype html
div(ng-include="'partials/presentations/show-menu'")

main
	oddin-preloader(load-var="load" side-bar="true")
	//- Modals
	#modal-create-video.modal.bottom-sheet
		.modal-content.modal-criar-item.modal-post-resposta
			.row
				form.offset-m2.offset-l3.col.s12.m8.l6
					h1.modal-criar-item__titulo Criar Video
					.row
						.input-field.col.s20
							video(autoplay="true" id="gum")
							video(autoplay="true" id="recorded")
						.col.s12.m9
							.modal-post-respostas__options
								button.btn.waves-effect.waves-light( id="record" class="__web-inspector-hide-shortcut__") Gravar
								button.btn.waves-effect.waves-light(style="margin-left: 16px;" id="play" disabled) Visualizar	
						.col.s12.m3
							button.btn.waves-effect.waves-light.modal-post-resposta__submit.modal-close(id="download" type="submit" name="action" disabled) Enviar

	#modal-create-answer.modal.bottom-sheet
		.modal-content.modal-criar-item.modal-post-resposta
			.row
				form.offset-m2.offset-l3.col.s12.m8.l6(ng-submit="createAnswer(newAnswer)")
					h1.modal-criar-item__titulo Responder Dúvida
					.row
						.input-field.col.s12
							textarea#new-answer-text.materialize-textarea(ng-model="newAnswer.text")
							label(for="new-answer-text") Resposta
					.row
						.col.s12.m9
							.modal-post-resposta__options
								a.btn-floating
									i.material-icons text_fields
								a.btn-floating.disabled(disabled)
									i.material-icons mic
								a.btn-floating(ng-click="modalCreateVideo(question)" href="")
									i.material-icons videocam
								a.btn-floating.disabled(disabled)
									i.material-icons attach_file
						.col.s12.m3
							button.btn.waves-effect.waves-light.modal-post-resposta__submit.modal-close(type="submit" name="action") Enviar
	//- Main Content
	.container
		.row.dropdown-row
			.offset-m3.col.m6.s12
				a.dropdown-button.btn.custom-dropdown(href="" data-activates="dropdownOrderBy" data-beloworigin="true" data-alignment="right" data-hover="true" dropdown) Ordenar Dúvidas
				ul#dropdownOrderBy.dropdown-content
					li
						a#post-order.filter-item-active(href="" ng-click="disableFilter()") Por Postagem
					li
						a#ranking-order(href="" ng-click="enableFilter()") Por Ranking
		p.empty-message.center-align(ng-if="questions.length == 0") Nenhuma dúvida foi postada
		.card.pergunta(ng-repeat="question in questions | orderBy: ((filter || '') && '(upvotes - downvotes)') : true")
			.card-content
				.pergunta__header
					span.autor {{question.anonymous ? "Anônimo" : question.person.name}}
					span.datahora {{question.created_at | date:"dd/MM/yyyy à's' HH:mm"}}
				.pergunta__content
					p {{question.text}}
			.card-action.pergunta__action
				.row
					.col.s12.m4
						.status
							.upvote-disabled--prof
								i.material-icons keyboard_arrow_up
								span.custom-badge-disabled {{question.upvotes - question.downvotes}}
							div(ng-class="{'check-entendi--prof': question.answered, 'check-nao-entendi--prof': !question.answered}")
								i.material-icons check
					.col.m4
						.responder
							a.waves-effect.btn-flat.modal-trigger(ng-click="modalCreateAnswer(question)" href="") Responder
					.col.m4
						.ver-resposta--prof(ng-if="question.has_answer")
							a.waves-effect.btn-flat(id="button_{{question.id}}" ng-click="question.answers ? closeAnswers(question) : findAnswers(question)")
								span Ver Respostas
			.resposta(ng-attr-id="{{answer.id}}" ng-repeat="answer in question.answers | orderBy: '(upvotes - downvotes)' : true")
				.resposta__header
					span.autor {{answer.person.name}}
					span.datahora {{answer.created_at | date:"dd/MM/yyyy à's' HH:mm"}}
				.resposta__content
					p  {{answer.text}}
				.resposta__action
					.upvote-disabled--prof
						a: i.material-icons keyboard_arrow_up
						span.custom-badge-disabled--prof {{answer.upvotes - answer.downvotes}}
					div(ng-class="{'check-entendi': answer.accepted, 'check-disabled': !answer.accepted}")
						i.material-icons check